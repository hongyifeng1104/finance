webpackJsonp([19],{"/pTt":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"sections",data:function(){var t=this;return{model1:!1,tbWidth:100,total:100,vs:!1,vs1:!1,formSel:{input:"",selectTp:"",selectTpValue:"",selectCm:"",selectCmValue:"",selectTm:[],payTm:[],loanTimeStart:"",loanTimeEnd:"",payTimeStart:"",payTimeEnd:""},remarks:[],loanNo:"",loanId:0,descForm:{txtFr:"",descCount:"",descNm:0},descRules:{descLength:200,desc:[{require:!0,type:"string",max:this.descLength,message:"备注最多为200字",trigger:"blur"}]},columns1:[{title:"借款编号",width:150,key:"loanNo"},{title:"客户姓名",width:100,key:"custName"},{title:"手机号",width:120,key:"custMobile"},{title:"产品类型",width:90,key:"loanType"},{title:"收款户名",width:100,key:"userName"},{title:"收款账号",width:200,key:"cardNo"},{title:"收款银行",width:200,key:"bankName"},{title:"账户类型",width:100,key:"personal"},{title:"借款时间",key:"loanTime",width:160},{title:"贴息金额",width:100,key:"discountAmount"},{title:"结算金额",width:100,key:"loanAmount"},{title:"结算状态",width:100,key:"status"},{title:"结算平台",width:150,key:"payPlat"},{title:"结算流水号",width:150,key:"tradeNo"},{title:"结算时间",key:"payTime",width:150},{title:"资金提供方",width:100,key:"payPlat"},{title:"备注",key:"action",width:150,align:"center",render:function(e,a){return e("div",[e("Button",{props:{type:"primary",size:"small"},on:{click:function(){t.show(a.row)}}},"备注")])}}],data1:[{name:"张一河",userId:"深圳市轻工科技有限公司",payTm:"2017/02/15  12:22:23",money:"中国银行",firstMn:"对公",payMn:"3562",person:0,countMn:"中国银行",countAg:"对公",countSt:"3562",countWho:0,countId:"3562",countTm:"2017/02/15  12:22:23"}]}},created:function(){var t=this.columns1;if($(window).width()<768)for(var e=0;e<t.length-1;e++)t[e].width=this.tbWidth;t[t.length-1].width=60,t[t.length-1].fixed="right",this.columns1=t,this.loadContent(1)},computed:{pageWin:function(){return Math.max(window.innerWidth,document.documentElement.clientWidth,document.body.clientWidth)}},methods:{showMenu:function(t){"全部"!=t&&""!=t?(this.formSel.selectTp=t,this.formSel.selectTpValue=t.split(":")[0]):(this.formSel.selectTp="",this.formSel.selectTpValue="")},orShow:function(t){this.vs=t},showMenu1:function(t){"全部"!=t&&""!=t?(this.formSel.selectCm=" : "+t,this.formSel.selectCmValue=t):(this.formSel.selectCm="",this.formSel.selectCmValue="")},orShow1:function(t){this.vs1=t},dateChange:function(t){this.formSel.selectTm=t,this.formSel.loanTimeStart=t[0],this.formSel.loanTimeEnd=void 0==t[1]?"":t[1]},dateChange1:function(t){this.formSel.payTm=t,this.formSel.payTimeStart=t[0],this.formSel.payTimeEnd=void 0==t[1]?"":t[1]},exportData:function(t){var e=this;window.location.href="/export/loanDetailDowm?value="+e.formSel.input+"&loanTimeStart="+e.formSel.loanTimeStart+"&loanTimeEnd="+e.formSel.loanTimeEnd+"&payTimeStart="+e.formSel.payTimeStart+"&payTimeEnd="+e.formSel.payTimeEnd+"&status="+e.formSel.selectTpValue+"&payPlat="+e.formSel.selectCmValue},changePage:function(t){this.loadContent(t)},show:function(t){this.descForm.desc="",this.model1=!0,this.descForm.descCount=this.descForm.descNm+"/"+this.descRules.descLength,this.selectRemark(t.loanNo),this.loanNo=t.loanNo,this.loanId=t.loanId},chkDate:function(){},handleSubmit:function(t){},countDesc:function(t){var e=this,a=this.descForm.desc;this.descForm.descNm=a.length,this.descForm.descCount=this.descForm.descNm+"/"+this.descRules.descLength,this.$refs[t].validate(function(t){t||e.$Message.error("表单验证失败!")})},loadContent:function(t){var e=10*(parseInt(t)-1),a=e+10,s=this,o=new FormData;o.append("value",s.formSel.input),o.append("loanTimeStart",s.formSel.selectTm[0]?s.formSel.selectTm[0]:""),o.append("loanTimeEnd",s.formSel.selectTm[1]?s.formSel.selectTm[1]:""),o.append("payTimeStart",s.formSel.payTm[0]?s.formSel.payTm[0]:""),o.append("payTimeEnd",s.formSel.payTm[1]?s.formSel.payTm[1]:""),o.append("status",s.formSel.selectTpValue?s.formSel.selectTpValue:""),o.append("payPlat",s.formSel.selectCmValue?s.formSel.selectCmValue:""),o.append("firstResult",e),o.append("maxResults",a),this.axios.post("/detail/selectLoanDetail",o,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){1==t.data.resCode?(s.total=t.data.count,t.data.result.forEach(function(t){"110205"==t.payPlat?t.payPlat="中科诺":"110408"==t.payPlat?t.payPlat="华金":t.payPlat="",0==t.loanType?t.loanType="消费贷":1==t.loanType&&(t.loanType="现金贷"),0==t.personal?t.personal="个人":1==t.personal&&(t.personal="对公"),0==t.status?t.status="等待放款":1==t.status?t.status="放款成功":2==t.status?t.status="放款失败":3==t.status?t.status="合同取消":4==t.status?t.status="合同结清":5==t.status&&(t.status="放款处理中")},this),s.data1=t.data.result):alert(t.data.msg)}).catch(function(t){this.$Message.warning("系统异常")})},selectRemark:function(t){var e=this,a=new FormData;a.append("loanNo",t),this.axios.post("/detail/selectRemark",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){1==t.data.resCode?e.remarks=t.data.result:alert(t.data.msg)}).catch(function(t){this.$Message.warning("系统异常")})},addRemark:function(){var t=this,e=new FormData;e.append("loanNo",t.loanNo),e.append("loanId",t.loanId),e.append("remark",t.descForm.desc),this.axios.post("/detail/addRemark",e,{headers:{"Content-Type":"multipart/form-data"}}).then(function(e){1==e.data.resCode?t.model1=!1:alert(e.data.msg)}).catch(function(t){this.$Message.warning("系统异常")})},reset:function(){this.formSel={input:"",selectTp:"",selectTpValue:"",selectCm:"",selectCmValue:"",selectTm:[],payTm:[],loanTimeStart:"",loanTimeEnd:"",payTimeStart:"",payTimeEnd:""}}}}},"1Iqt":function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"sections"},[a("h1",[t._v("贷款结算查询")]),t._v(" "),a("div",{staticClass:"pl_body"},[a("Row",{staticClass:"form_row"},[a("Col",{attrs:{sm:22,xs:24}},[a("Form",{staticClass:"downMenu",attrs:{model:t.formSel}},[a("FormItem",[a("Input",{attrs:{icon:"ios-search",placeholder:"借款编号/手机号/收款户名"},model:{value:t.formSel.input,callback:function(e){t.$set(t.formSel,"input",e)},expression:"formSel.input"}}),t._v(" "),a("Button",{attrs:{type:"primary"},on:{click:function(e){t.loadContent(1)}}},[t._v("查询")]),t._v(" "),a("DatePicker",{attrs:{value:t.formSel.selectTm,format:"yyyy-MM-dd",type:"daterange",placement:"bottom-start",placeholder:"借款时间"},on:{"on-change":t.dateChange}}),t._v(" "),a("DatePicker",{attrs:{value:t.formSel.payTm,format:"yyyy-MM-dd",type:"daterange",placement:"bottom-start",placeholder:"结算时间"},on:{"on-change":t.dateChange1}}),t._v(" "),a("Dropdown",{staticClass:"showMn",attrs:{trigger:"click"},on:{"on-click":t.showMenu,"on-visible-change":t.orShow}},[a("Button",{class:{active:t.vs,chk:""!=t.formSel.selectTp},attrs:{type:"ghost"}},[t._v("\n                                结算状态"),a("span",{domProps:{textContent:t._s(t.formSel.selectTp)}}),t._v(" "),a("Icon",{attrs:{type:"arrow-down-b"}})],1),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"全部",selected:"全部"==t.formSel.selectTp}},[t._v("全部")]),t._v(" "),a("DropdownItem",{attrs:{name:"0:未结算",selected:"未结算"==t.formSel.selectTp}},[t._v("未结算")]),t._v(" "),a("DropdownItem",{attrs:{name:"1:已结算",selected:"已结算"==t.formSel.selectTp}},[t._v("已结算")])],1)],1),t._v(" "),a("Dropdown",{staticClass:"showMn",attrs:{trigger:"click"},on:{"on-click":t.showMenu1,"on-visible-change":t.orShow1}},[a("Button",{class:{active:t.vs1,chk:""!=t.formSel.selectCm},attrs:{type:"ghost"}},[t._v("\n                                资金提供方"),a("span",{domProps:{textContent:t._s(t.formSel.selectCm)}}),t._v(" "),a("Icon",{attrs:{type:"arrow-down-b"}})],1),t._v(" "),a("DropdownMenu",{attrs:{slot:"list"},slot:"list"},[a("DropdownItem",{attrs:{name:"全部",selected:"全部"==t.formSel.selectCm}},[t._v("全部")]),t._v(" "),a("DropdownItem",{attrs:{name:"中科诺",selected:"中科诺"==t.formSel.selectCm}},[t._v("中科诺")]),t._v(" "),a("DropdownItem",{attrs:{name:"华金",selected:"华金"==t.formSel.selectCm}},[t._v("华金")])],1)],1),t._v(" "),a("Button",{on:{click:t.reset}},[t._v("重置")])],1)],1)],1),t._v(" "),a("Col",{attrs:{sm:2,xs:24}},[a("div",{staticClass:"float_right"},[a("Button",{attrs:{type:"success"},on:{click:function(e){t.exportData(2)}}},[a("Icon",{attrs:{type:"ios-download-outline"}}),t._v(" 导出EXCEL")],1)],1)])],1),t._v(" "),a("div",{staticClass:"table_show"},[a("Table",{ref:"table",attrs:{border:"",columns:t.columns1,data:t.data1}})],1),t._v(" "),t.pageWin>=768?a("Row",{attrs:{gutter:16}},[a("Col",{attrs:{sm:5,xs:24}},[a("div",{staticClass:"total"},[t._v("共"+t._s(t.total)+"条")])]),t._v(" "),a("Col",{staticClass:"txt_right",attrs:{sm:19,xs:24}},[a("Page",{attrs:{total:t.total,"show-elevator":""},on:{"on-change":t.changePage}})],1)],1):a("Page",{attrs:{total:t.total,simple:""},on:{"on-change":t.changePage}})],1),t._v(" "),a("Modal",{staticClass:"historyDesc noFooter",attrs:{title:"备注",width:"900"},model:{value:t.model1,callback:function(e){t.model1=e},expression:"model1"}},[a("dl",{staticClass:"history_list"},[a("dd",[t._v("历史备注")]),t._v(" "),t._l(t.remarks,function(e){return a("dt",{key:e.remark},[a("p",[t._v(t._s(e.remark))]),t._v(" "),a("span",[t._v(t._s(e.createTime))])])})],2),t._v(" "),a("Form",{ref:"descForm",attrs:{model:t.descForm,rules:t.descRules}},[a("FormItem",{attrs:{prop:"desc"},model:{value:t.descForm,callback:function(e){t.descForm=e},expression:"descForm"}},[a("Input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:8},placeholder:"输入备注内容"},on:{"on-keyup":function(e){t.countDesc("descForm")}},model:{value:t.descForm.desc,callback:function(e){t.$set(t.descForm,"desc",e)},expression:"descForm.desc"}}),t._v(" "),a("div",{staticClass:"submitDesc"},[a("span",{domProps:{textContent:t._s(t.descForm.descCount)}}),a("Button",{attrs:{type:"primary"},on:{click:function(e){t.addRemark()}}},[t._v("提交")])],1),t._v(" "),a("div",{staticStyle:{clear:"both"}})],1)],1),t._v(" "),a("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},staticRenderFns:[]}},Ycc3:function(t,e,a){var s=a("VU/8")(a("/pTt"),a("1Iqt"),null,null,null);t.exports=s.exports}});
//# sourceMappingURL=19.2a579dc53c10fdc82970.js.map